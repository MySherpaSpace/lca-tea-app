{"ast":null,"code":"import _slicedToArray from\"/Users/mariasherpaspace/Documents/SherpaSpaceWorkFiles/Projects/LCA-TEA/LCA-TEA Coding/lca-tea-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"./01_1LoginPage.css\";import{Link,useNavigate,useLocation}from'react-router-dom';import{useState}from\"react\";import axios from\"axios\";import HanhwaLogo from\"../img/hanhwa-logo.svg\";import AuthLoading from\"../components/AuthLoading\";import{httpPaths,allowServerComm,homeAddress}from\"../utils/appConstants\";import{getNavURL,processServerResponse}from\"../utils/appUtils\";import AlertModal from\"../components/AlertModal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function ResetPwPage(){var _location$state,_location$state$from;var navigate=useNavigate();var location=useLocation();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),userEmail=_useState2[0],setUserEmail=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showLoadingScreen=_useState4[0],setShowLoadingScreen=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showAlertModal=_useState6[0],setShowAlertModal=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),alertModalTitle=_useState8[0],setAlertModalTitle=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),alertModalContent=_useState10[0],setAlertModalContent=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),alertModalButtons=_useState12[0],setAlertModalButtons=_useState12[1];var alertModalOpen=function alertModalOpen(title,content,buttons){setAlertModalButtons(buttons);setAlertModalTitle(title);setAlertModalContent(content);setShowAlertModal(true);};var alertModalClose=function alertModalClose(){return setShowAlertModal(false);};var from=((_location$state=location.state)===null||_location$state===void 0?void 0:(_location$state$from=_location$state.from)===null||_location$state$from===void 0?void 0:_location$state$from.pathname)||homeAddress;function handleSubmit(event){event.preventDefault();if(!userEmail){alertModalOpen(\"Please input email\");return;}if(allowServerComm){setShowLoadingScreen(true);axios.get(httpPaths[\"resetPw\"],{email:userEmail}).then(function(response){setShowLoadingScreen(false);var isOk=processServerResponse(response);if(!isOk){alertModalOpen(\"User not found\");}else{alertModalOpen(\"Check your email for instructions\");navigate(from,{replace:true});}}).catch(function(e){alert(\"Error: \"+e);setShowLoadingScreen(false);});}else{alertModalOpen(\"Check your email for instructions\",\"\",[{title:\"Ok\",style:\"default\",onClick:function onClick(){return navigate(from,{replace:true});}}]);}}var handleEmailInput=function handleEmailInput(event){setUserEmail(event.target.value);};var handleCancelClick=function handleCancelClick(){setShowLoadingScreen(false);};var loginUrl=getNavURL(\"/login\");var alertModal=/*#__PURE__*/_jsx(AlertModal,{buttons:alertModalButtons,content:alertModalContent,title:alertModalTitle,onClose:alertModalClose,isOpen:showAlertModal});return/*#__PURE__*/_jsx(\"div\",{className:\"columns is-mobile is-centered is-vcentered\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"column is-two-fifths\",children:[showAlertModal&&alertModal,/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:!showLoadingScreen?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"has-text-centered\",children:[/*#__PURE__*/_jsx(\"img\",{src:HanhwaLogo,alt:\"Hanhwa logo\",className:\"auth-page-logo\"}),/*#__PURE__*/_jsx(\"p\",{className:\"title is-5 mt-5\",children:\"LCA-TEA Platform\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"has-text-centered\",children:\"We will send instructions to your email on how to reset your password\"}),/*#__PURE__*/_jsx(\"div\",{className:\"block\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"input\",{className:\"input\",type:\"email\",placeholder:\"name@mail.com\",value:userEmail,onChange:handleEmailInput})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"has-text-centered\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-primary\",children:\"Send Email\"})})]})]})}),/*#__PURE__*/_jsx(\"footer\",{className:\"card-footer has-text-centered\",children:/*#__PURE__*/_jsx(Link,{to:loginUrl,className:\"card-footer-item\",children:\"Go Back\"})})]}):/*#__PURE__*/_jsx(AuthLoading,{onCancelClick:handleCancelClick})})]})});}export default ResetPwPage;","map":{"version":3,"names":["Link","useNavigate","useLocation","useState","axios","HanhwaLogo","AuthLoading","httpPaths","allowServerComm","homeAddress","getNavURL","processServerResponse","AlertModal","ResetPwPage","navigate","location","userEmail","setUserEmail","showLoadingScreen","setShowLoadingScreen","showAlertModal","setShowAlertModal","alertModalTitle","setAlertModalTitle","alertModalContent","setAlertModalContent","alertModalButtons","setAlertModalButtons","alertModalOpen","title","content","buttons","alertModalClose","from","state","pathname","handleSubmit","event","preventDefault","get","email","then","response","isOk","replace","catch","e","alert","style","onClick","handleEmailInput","target","value","handleCancelClick","loginUrl","alertModal"],"sources":["/Users/mariasherpaspace/Documents/SherpaSpaceWorkFiles/Projects/LCA-TEA/LCA-TEA Coding/lca-tea-app/src/pages/01_2ResetPwPage.js"],"sourcesContent":["import \"./01_1LoginPage.css\";\n\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\nimport { useState } from \"react\";\n\nimport axios from \"axios\";\n\nimport HanhwaLogo from \"../img/hanhwa-logo.svg\"\nimport AuthLoading from \"../components/AuthLoading\";\nimport { httpPaths, allowServerComm, homeAddress } from \"../utils/appConstants\";\nimport { getNavURL, processServerResponse } from \"../utils/appUtils\";\nimport AlertModal from \"../components/AlertModal\";\n\nfunction ResetPwPage() {\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const [userEmail, setUserEmail] = useState(\"\");\n  const [showLoadingScreen, setShowLoadingScreen] = useState(false);\n\n  const [showAlertModal, setShowAlertModal] = useState(false);\n  const [alertModalTitle, setAlertModalTitle] = useState(null)\n  const [alertModalContent, setAlertModalContent] = useState(null)\n  const [alertModalButtons, setAlertModalButtons] = useState(null)\n\n  const alertModalOpen = (title, content, buttons) => {\n    setAlertModalButtons(buttons)\n    setAlertModalTitle(title)\n    setAlertModalContent(content)\n    setShowAlertModal(true)\n  }\n  const alertModalClose = () => setShowAlertModal(false);\n\n  let from = location.state?.from?.pathname || homeAddress;\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    if(!userEmail){\n      alertModalOpen(\"Please input email\")\n      return;\n    }\n\n    if(allowServerComm){\n      setShowLoadingScreen(true)\n\n      axios.get(httpPaths[\"resetPw\"], {email: userEmail})\n      .then((response)=> {\n        setShowLoadingScreen(false)\n        let isOk = processServerResponse(response)\n  \n        if(!isOk){\n          alertModalOpen(\"User not found\")\n        }else{\n          alertModalOpen(\"Check your email for instructions\")\n          navigate(from, { replace: true });\n        }\n  \n      }).catch(e => {\n        alert(\"Error: \"+e)\n        setShowLoadingScreen(false)\n      });\n    }else{\n      alertModalOpen(\"Check your email for instructions\", \"\", [{\n        title: \"Ok\",\n        style: \"default\",\n        onClick: () =>  navigate(from, { replace: true })\n      }]);\n    }\n  }\n\n  const handleEmailInput = (event) => {\n    setUserEmail(event.target.value)\n  }\n\n  const handleCancelClick = () => {\n    setShowLoadingScreen(false)\n  }\n  const loginUrl = getNavURL(\"/login\");\n\n  const alertModal = (\n    <AlertModal\n    buttons={alertModalButtons}\n    content={alertModalContent}\n    title={alertModalTitle}\n    onClose={alertModalClose} \n    isOpen={showAlertModal}/>\n  );\n  \n  return(\n    <div className=\"columns is-mobile is-centered is-vcentered\">\n      <div className=\"column is-two-fifths\">\n      {showAlertModal && alertModal}\n        <div className=\"card\">\n        \n          {!showLoadingScreen? (\n            <>\n              <div className=\"has-text-centered\">\n                <img src={HanhwaLogo} alt=\"Hanhwa logo\" className=\"auth-page-logo\"/>\n                <p className=\"title is-5 mt-5\">LCA-TEA Platform</p>\n              </div>\n\n              <div className=\"card-content\">\n                <div className=\"content\">\n                  \n                  <div className=\"has-text-centered\">\n                    We will send instructions to your email on how to reset your password\n                  </div>\n                  <div className=\"block\"/>\n\n                  <form onSubmit={handleSubmit}>\n                    <div className=\"field\">\n                      <label className=\"label\">Email</label>\n                      <div className=\"control\">\n                        <input className=\"input\" type=\"email\" placeholder=\"name@mail.com\" value={userEmail} onChange={handleEmailInput}/>\n                      </div>\n                    </div>\n\n                    <div className=\"has-text-centered\">\n                      <button className=\"button is-primary\">Send Email</button>\n                    </div>\n                  </form>\n                </div>\n              </div>\n\n              <footer className=\"card-footer has-text-centered\">\n                <Link to={loginUrl} className=\"card-footer-item\">Go Back</Link>   \n              </footer>\n            </>\n          ):(\n            <AuthLoading onCancelClick={handleCancelClick}/>\n          )}\n\n        </div>\n      </div>\n    </div>\n  );\n}\n \nexport default ResetPwPage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}